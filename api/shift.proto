syntax = "proto3";

import "google/protobuf/timestamp.proto";

package api;


message RegisterReq {
	string build_id = 1;
	string privatekey = 2;
}

message RegisterRes {
	bool registered = 1;
}

message LogShipReq {
	string build_id = 1;
	google.protobuf.Timestamp time = 2;
	string log = 3;
}

message LogShipRes {
}

message GetProjectReq {
	string build_id = 1;
}

message GetProjectRes {
	string container_id = 1;
	string repository_id = 2;
	string vcs_id = 3;
	string branch = 4;
	string name = 5;
	string clone_url = 6;
	string language = 7;
	string accesstoken = 8;
	string commit_id = 9;
	string storage_path = 10;
	string source = 11;
}

service Shift {

	rpc Register(RegisterReq) returns (RegisterRes){};
	rpc LogShip(stream LogShipReq) returns (LogShipRes){};
	rpc GetProject(GetProjectReq) returns (GetProjectRes){};
}
